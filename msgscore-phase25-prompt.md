# MsgScore â€” Phase 2.5: TeamåŸºç›¤ãƒ•ãƒ«å®Ÿè£…
## Claude Code é–‹ç™ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

---

## å‰æ
Phase 2ï¼ˆèªè¨¼ãƒ»èª²é‡‘ãƒ»Proæ©Ÿèƒ½ï¼‰ã¾ã§å®Ÿè£…æ¸ˆã¿ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è¿½åŠ å®Ÿè£…ã™ã‚‹ã€‚
ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆEditorial Dashboardï¼‰ã¯ç¶­æŒã€‚
æ—¢å­˜ã®Supabaseæ¥ç¶šãƒ»Stripeé€£æºãƒ»èªè¨¼ãƒ•ãƒ­ãƒ¼ã‚’ãã®ã¾ã¾æ´»ã‹ã™ã“ã¨ã€‚

---

## Phase 2.5 ã®ã‚´ãƒ¼ãƒ«
ã€Œèª²é‡‘å¯èƒ½ãªTeamã€ã‚’ä½œã‚‹ã€‚Team S/M/L ã®3ãƒ—ãƒ©ãƒ³ãŒå‹•ä½œã—ã€ç®¡ç†è€…ãŒãƒãƒ¼ãƒ é‹ç”¨ã«å¿…è¦ãªã‚¬ãƒãƒŠãƒ³ã‚¹æ©Ÿèƒ½ã‚’å…¨ã¦ä½¿ãˆã‚‹çŠ¶æ…‹ã«ã™ã‚‹ã€‚
Team Proï¼ˆçµ„ç¹”å­¦ç¿’ãƒ»è‡ªå‹•åŒ–ï¼‰ã¯Phase 3ã§å®Ÿè£…ã™ã‚‹ãŸã‚ã€ã“ã®æ®µéšã§ã¯å«ã‚ãªã„ã€‚

---

## 1. DBè¿½åŠ ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆSupabaseï¼‰

Phase 2ã§ä½œæˆæ¸ˆã¿ã® profiles / score_history / custom_segments / daily_usage ã«åŠ ãˆã¦ã€ä»¥ä¸‹ã‚’è¿½åŠ ã€‚

```sql
-- ãƒãƒ¼ãƒ 
create table teams (
  id uuid primary key default gen_random_uuid(),
  name text not null,
  created_by uuid references auth.users not null,
  plan text not null,          -- 'team_s' / 'team_m' / 'team_l'
  max_seats int not null,      -- 5 / 10 / 30
  stripe_subscription_id text,
  created_at timestamp default now()
);

-- ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼
create table team_members (
  id uuid primary key default gen_random_uuid(),
  team_id uuid references teams not null,
  user_id uuid references auth.users,  -- æ‹›å¾…æ‰¿è«¾å¾Œã«ã‚»ãƒƒãƒˆ
  role text not null default 'member',  -- 'owner' / 'member'
  invited_email text not null,
  status text not null default 'pending',  -- 'pending' / 'active' / 'removed'
  joined_at timestamp,
  created_at timestamp default now(),
  unique(team_id, user_id)
);

-- å…±æœ‰ã‚»ã‚°ãƒ¡ãƒ³ãƒˆãƒ—ãƒªã‚»ãƒƒãƒˆ
create table team_presets (
  id uuid primary key default gen_random_uuid(),
  team_id uuid references teams not null,
  name text not null,
  segment jsonb not null,  -- AudienceSegmentï¼ˆconversionGoalå«ã‚€ï¼‰
  created_by uuid references auth.users not null,
  created_at timestamp default now()
);

-- ãƒ–ãƒ©ãƒ³ãƒ‰ãƒœã‚¤ã‚¹è¨­å®š
create table brand_voice (
  id uuid primary key default gen_random_uuid(),
  team_id uuid references teams not null unique,
  tone text,                          -- ãƒˆãƒ¼ãƒ³æŒ‡é‡ï¼ˆè‡ªç”±è¨˜è¿°ï¼‰
  ng_words text[] default '{}',       -- NGãƒ¯ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆ
  required_checks text[] default '{}', -- è¨˜è¼‰å¿…é ˆã®è¦ç´ 
  subject_rules text,                 -- ä»¶åãƒ«ãƒ¼ãƒ«ï¼ˆè‡ªç”±è¨˜è¿°ï¼‰
  min_score_threshold int,            -- æœ€ä½ã‚¹ã‚³ã‚¢ãƒ©ã‚¤ãƒ³ï¼ˆæ¨å¥¨65ï¼‰
  min_score_action text default 'warn',  -- 'warn' / 'badge'
  updated_by uuid references auth.users,
  updated_at timestamp default now()
);

-- ä¿®æ­£ä¾é ¼ï¼ˆãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼é–“ï¼‰
create table revision_requests (
  id uuid primary key default gen_random_uuid(),
  score_history_id uuid references score_history not null,
  team_id uuid references teams not null,
  requested_by uuid references auth.users not null,  -- ä¾é ¼è€…ï¼ˆç®¡ç†è€…ï¼‰
  assigned_to uuid references auth.users not null,    -- æ‹…å½“è€…ï¼ˆãƒ¡ãƒ³ãƒãƒ¼ï¼‰
  comment text not null,
  status text not null default 'open',  -- 'open' / 'resolved'
  resolved_at timestamp,
  created_at timestamp default now()
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
create index idx_team_members_team on team_members(team_id);
create index idx_team_members_user on team_members(user_id);
create index idx_team_presets_team on team_presets(team_id);
create index idx_brand_voice_team on brand_voice(team_id);
create index idx_revision_requests_team on revision_requests(team_id);
create index idx_score_history_team on score_history(team_id, created_at desc);
```

### RLSãƒãƒªã‚·ãƒ¼

```sql
-- teams: ãƒ¡ãƒ³ãƒãƒ¼ã®ã¿é–²è¦§å¯èƒ½
alter table teams enable row level security;
create policy "Team members can view team"
  on teams for select
  using (id in (
    select team_id from team_members
    where user_id = auth.uid() and status = 'active'
  ));

-- team_members: åŒãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã®ã¿é–²è¦§å¯èƒ½
alter table team_members enable row level security;
create policy "Team members can view members"
  on team_members for select
  using (team_id in (
    select team_id from team_members
    where user_id = auth.uid() and status = 'active'
  ));

-- team_presets: åŒãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã®ã¿
alter table team_presets enable row level security;
create policy "Team members can view presets"
  on team_presets for select
  using (team_id in (
    select team_id from team_members
    where user_id = auth.uid() and status = 'active'
  ));
create policy "Team members can insert presets"
  on team_presets for insert
  with check (team_id in (
    select team_id from team_members
    where user_id = auth.uid() and status = 'active'
  ));

-- brand_voice: åŒãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ãŒé–²è¦§å¯èƒ½ã€‚æ›´æ–°ã¯Ownerã®ã¿ï¼ˆAPI Routeå´ã§åˆ¶å¾¡ï¼‰
alter table brand_voice enable row level security;
create policy "Team members can view brand voice"
  on brand_voice for select
  using (team_id in (
    select team_id from team_members
    where user_id = auth.uid() and status = 'active'
  ));

-- revision_requests: åŒãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã®ã¿
alter table revision_requests enable row level security;
create policy "Team members can view revisions"
  on revision_requests for select
  using (team_id in (
    select team_id from team_members
    where user_id = auth.uid() and status = 'active'
  ));
```

### score_history ã®æ›´æ–°

Phase 2ã§ä½œæˆæ¸ˆã¿ã® score_history ãƒ†ãƒ¼ãƒ–ãƒ«ã« team_id ã‚«ãƒ©ãƒ ãŒæ—¢ã«ã‚ã‚‹ã€‚
ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ãŒã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã—ãŸå ´åˆã€team_id ã‚’è‡ªå‹•ã‚»ãƒƒãƒˆã™ã‚‹ã€‚
ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¯åŒã˜team_idã®ä»–ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚¹ã‚³ã‚¢å±¥æ­´ã‚’é–²è¦§å¯èƒ½ã«ã™ã‚‹ã€‚

RLSè¿½åŠ :
```sql
create policy "Team members can view team scores"
  on score_history for select
  using (
    user_id = auth.uid()
    or team_id in (
      select team_id from team_members
      where user_id = auth.uid() and status = 'active'
    )
  );
```

### profiles ã®æ›´æ–°

profiles ãƒ†ãƒ¼ãƒ–ãƒ«ã® plan ã‚«ãƒ©ãƒ ã«ä»¥ä¸‹ã‚’è¿½åŠ å¯¾å¿œ:
```
'free' / 'pro' / 'team_s' / 'team_m' / 'team_l'
```

ãŸã ã—Teamãƒ¡ãƒ³ãƒãƒ¼ã®planã¯å€‹äººã®planã¨ã¯ç‹¬ç«‹ã€‚ãƒãƒ¼ãƒ æ‰€å±ã®åˆ¤å®šã¯ team_members ãƒ†ãƒ¼ãƒ–ãƒ«ã§è¡Œã†ã€‚

---

## 2. Stripe Teamèª²é‡‘

### 2.1 Stripeå•†å“ï¼ˆPhase 2.5ã§è¿½åŠ ï¼‰

```
Stripe Productsï¼ˆTeam 3å•†å“ Ã— æœˆé¡ã®ã¿ï¼‰:

2. MsgScore Team S (5å¸­)  : Â¥4,980/æœˆ
3. MsgScore Team M (10å¸­) : Â¥8,980/æœˆ
4. MsgScore Team L (30å¸­) : Â¥19,800/æœˆ

è¿½åŠ ç®¡ç†è€…ã‚¢ãƒ‰ã‚ªãƒ³: Â¥500/æœˆ/äºº
```

å¹´æ‰•ã„ã¯å¾Œå›ã—ã€‚ã¾ãšæœˆé¡ã®ã¿å®Ÿè£…ã€‚

### 2.2 ç’°å¢ƒå¤‰æ•°è¿½åŠ 

`.env.local` ã«è¿½åŠ :
```
STRIPE_PRICE_TEAM_S=price_xxxxx
STRIPE_PRICE_TEAM_M=price_xxxxx
STRIPE_PRICE_TEAM_L=price_xxxxx
STRIPE_PRICE_ADMIN_ADDON=price_xxxxx
```

æœªè¨­å®šã®å ´åˆã¯Teamèª²é‡‘ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤ºã«ã™ã‚‹ï¼ˆgraceful degradationï¼‰ã€‚

### 2.3 Checkout ãƒ•ãƒ­ãƒ¼

1. æ–™é‡‘ãƒšãƒ¼ã‚¸ã§ã€ŒTeam S/M/Lã€ã‚’é¸æŠ
2. POST /api/stripe/checkout ã«ãƒ—ãƒ©ãƒ³æƒ…å ±ã‚’é€ä¿¡
3. Stripe Checkout Sessionä½œæˆ â†’ ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
4. æ±ºæ¸ˆæˆåŠŸ â†’ Webhook ã§ teams ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒãƒ¼ãƒ ä½œæˆ + team_members ã« Owner è¿½åŠ 

### 2.4 ãƒ—ãƒ©ãƒ³å¤‰æ›´

| å¤‰æ›´ | å®Ÿè£… |
|------|------|
| Pro â†’ Team S | Stripe Subscription Updateï¼ˆå·®é¡æ—¥å‰²ã‚Šï¼‰ |
| Team S â†’ M â†’ L | Stripe Subscription Update |
| Team â†’ Free | Stripe Subscription Cancel â†’ æ¬¡å›è«‹æ±‚æ—¥ã§å¤±åŠ¹ |

### 2.5 Webhookè¿½åŠ å‡¦ç†

æ—¢å­˜ã® checkout.session.completed ãƒãƒ³ãƒ‰ãƒ©ã«åˆ†å²è¿½åŠ :
- metadata ã« `plan_type: 'team'` ã¨ `team_plan: 'team_s'` ãŒå«ã¾ã‚Œã‚‹å ´åˆ:
  1. teams ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒãƒ¼ãƒ ä½œæˆ
  2. team_members ã« Owner ã¨ã—ã¦è¿½åŠ ï¼ˆstatus: 'active'ï¼‰
  3. brand_voice ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ä½œæˆ

---

## 3. ãƒãƒ¼ãƒ ä½œæˆãƒ»æ‹›å¾…ãƒ•ãƒ­ãƒ¼

### 3.1 ãƒãƒ¼ãƒ ä½œæˆ

Teamèª²é‡‘å®Œäº†å¾Œã«è¡¨ç¤ºã™ã‚‹ç”»é¢:

```
src/app/team/setup/page.tsx
```

```
â”Œâ”€ ãƒãƒ¼ãƒ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                    â”‚
â”‚  ãƒãƒ¼ãƒ åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„                           â”‚
â”‚  [ â—‹â—‹â—‹ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°éƒ¨ ]                            â”‚
â”‚                                                    â”‚
â”‚  ãƒ¡ãƒ³ãƒãƒ¼ã‚’æ‹›å¾…ï¼ˆæœ€å¤§5åï¼‰                            â”‚
â”‚  [ ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ› ]  [+ è¿½åŠ ]                   â”‚
â”‚                                                    â”‚
â”‚  æ‹›å¾…ãƒªã‚¹ãƒˆ:                                         â”‚
â”‚  ğŸ“§ yamada@example.com              [Ã— å‰Šé™¤]       â”‚
â”‚  ğŸ“§ kimura@example.com              [Ã— å‰Šé™¤]       â”‚
â”‚                                                    â”‚
â”‚  [ãƒãƒ¼ãƒ ã‚’ä½œæˆã—ã¦æ‹›å¾…ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡]                     â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- ãƒãƒ¼ãƒ å: å¿…é ˆã€‚2-50æ–‡å­—
- ãƒ¡ãƒ³ãƒãƒ¼æ‹›å¾…: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›ã€‚max_seats - 1 äººã¾ã§ï¼ˆOwnerã§1å¸­ä½¿ç”¨ï¼‰
- é€ä¿¡ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ â†’ ãƒãƒ¼ãƒ ä½œæˆå®Œäº† â†’ ãƒãƒ¼ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

### 3.2 æ‹›å¾…ãƒ¡ãƒ¼ãƒ«

Supabase Edge Functions or API Route ã§é€ä¿¡ã€‚

ä»¶å: ã€Œâ—‹â—‹ã•ã‚“ãŒMsgScoreã®ãƒãƒ¼ãƒ ã«æ‹›å¾…ã—ã¾ã—ãŸã€
æœ¬æ–‡: ãƒãƒ¼ãƒ å + æ‹›å¾…ãƒªãƒ³ã‚¯

æ‹›å¾…ãƒªãƒ³ã‚¯: `https://msg-scorer.vercel.app/team/invite/[invite_token]`

### 3.3 æ‹›å¾…æ‰¿è«¾

```
src/app/team/invite/[token]/page.tsx
```

- æœªãƒ­ã‚°ã‚¤ãƒ³: ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ â†’ ãƒ­ã‚°ã‚¤ãƒ³å¾Œã«è‡ªå‹•å‚åŠ 
- ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿: ã€Œâ—‹â—‹ãƒãƒ¼ãƒ ã«å‚åŠ ã—ã¾ã™ã‹ï¼Ÿã€â†’ ã€Œå‚åŠ ã™ã‚‹ã€ãƒœã‚¿ãƒ³
- å‚åŠ æ™‚: team_members.status ã‚’ 'active' ã«æ›´æ–°ã€user_id ã‚’ã‚»ãƒƒãƒˆ

---

## 4. ãƒãƒ¼ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

```
src/app/team/page.tsx  â€” ãƒãƒ¼ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ï¼‰
```

### 4.1 ç®¡ç†è€…ãƒ“ãƒ¥ãƒ¼

```
â”Œâ”€ â—† â—‹â—‹ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°éƒ¨ â”€â”€â”€â”€ Team S (5å¸­) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                      â”‚
â”‚  [ğŸ“Š çµ±è¨ˆ]  [ğŸ‘¥ ãƒ¡ãƒ³ãƒãƒ¼]  [ğŸ¨ ãƒ–ãƒ©ãƒ³ãƒ‰è¨­å®š]  [âš™ï¸ è¨­å®š] â”‚
â”‚                                                      â”‚
â”‚  â”€â”€ ä»Šæœˆã®ã‚µãƒãƒªãƒ¼ â”€â”€                                  â”‚
â”‚  ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°å®Ÿè¡Œæ•°: 47å›                               â”‚
â”‚  ãƒãƒ¼ãƒ å¹³å‡ã‚¹ã‚³ã‚¢: 72.3 (+3.1 å…ˆæœˆæ¯”)                   â”‚
â”‚  æœ€ä½ãƒ©ã‚¤ãƒ³æœªé”ç‡: 12% (â†“æ”¹å–„)                          â”‚
â”‚                                                      â”‚
â”‚  â”€â”€ ãƒ¡ãƒ³ãƒãƒ¼åˆ¥ â”€â”€                                     â”‚
â”‚  ğŸ‘¤ å±±ç”° è£•å­   15å›  å¹³å‡78  â”â”â”â”â”â”â”â”â”â”â”â”â–‘â–‘â–‘â–‘       â”‚
â”‚  ğŸ‘¤ æœ¨æ‘ é¼     12å›  å¹³å‡65  â”â”â”â”â”â”â”â”â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘       â”‚
â”‚  ğŸ‘¤ æ¸¡è¾º é¦™ç¹”   20å›  å¹³å‡74  â”â”â”â”â”â”â”â”â”â”â”â–‘â–‘â–‘â–‘â–‘       â”‚
â”‚                                                      â”‚
â”‚  â”€â”€ ã‚¹ã‚³ã‚¢æ¨ç§»ï¼ˆãƒãƒ¼ãƒ ï¼‰ â”€â”€                             â”‚
â”‚  [æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•: ãƒ¡ãƒ³ãƒãƒ¼å…¨å“¡ + ãƒãƒ¼ãƒ å¹³å‡]               â”‚
â”‚                                                      â”‚
â”‚  â”€â”€ æœ€è¿‘ã®ä¿®æ­£ä¾é ¼ â”€â”€                                  â”‚
â”‚  âš ï¸ æœ¨æ‘ é¼ ã®ã‚¹ã‚³ã‚¢ 58 â†’ ä¿®æ­£ä¾é ¼ä¸­                   â”‚
â”‚  âœ… æ¸¡è¾º é¦™ç¹” ã®ã‚¹ã‚³ã‚¢ 62 â†’ ä¿®æ­£å®Œäº†                    â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ãƒ¡ãƒ³ãƒãƒ¼ãƒ“ãƒ¥ãƒ¼

```
â”Œâ”€ â—† â—‹â—‹ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°éƒ¨ â”€â”€â”€â”€ Team S â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                      â”‚
â”‚  [ğŸ“Š è‡ªåˆ†ã®ã‚¹ã‚³ã‚¢]  [ğŸ“‹ å…±æœ‰ãƒ—ãƒªã‚»ãƒƒãƒˆ]                  â”‚
â”‚                                                      â”‚
â”‚  â”€â”€ è‡ªåˆ†ã®ã‚µãƒãƒªãƒ¼ â”€â”€                                  â”‚
â”‚  ä»Šæœˆ: 12å›  å¹³å‡ã‚¹ã‚³ã‚¢: 65                             â”‚
â”‚  ãƒãƒ¼ãƒ å¹³å‡: 72.3  å·®: -7.3                            â”‚
â”‚                                                      â”‚
â”‚  â”€â”€ è‡ªåˆ† vs ãƒãƒ¼ãƒ å¹³å‡ â”€â”€                              â”‚
â”‚  [ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ: 5è»¸ã®è‡ªåˆ† vs ãƒãƒ¼ãƒ å¹³å‡]              â”‚
â”‚                                                      â”‚
â”‚  â”€â”€ ä¿®æ­£ä¾é ¼ (1ä»¶) â”€â”€                                 â”‚
â”‚  âš ï¸ å±±ç”°ã•ã‚“ã‹ã‚‰: ã€ŒCTAéƒ¨åˆ†ã‚’ã‚‚ã†å°‘ã—å…·ä½“çš„ã«ã€          â”‚
â”‚  å¯¾è±¡: 2/20ã®ãƒ¡ãƒ¼ãƒ«ä»¶åã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°                      â”‚
â”‚  [ å¯¾å¿œã™ã‚‹ ]                                         â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. ãƒ¡ãƒ³ãƒãƒ¼ç®¡ç†

```
src/app/team/members/page.tsx
```

ç®¡ç†è€…ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã€‚

```
â”Œâ”€ ğŸ‘¥ ãƒ¡ãƒ³ãƒãƒ¼ç®¡ç† â”€â”€â”€â”€â”€â”€ 3/5å¸­ ä½¿ç”¨ä¸­ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                       â”‚
â”‚  â”Œâ”€ ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¡ãƒ³ãƒãƒ¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ‘¤ å±±ç”° è£•å­  yamada@example.com   Owner   â€”â€”     â”‚ â”‚
â”‚  â”‚ ğŸ‘¤ æœ¨æ‘ é¼    kimura@example.com   Member  [å‰Šé™¤] â”‚ â”‚
â”‚  â”‚ ğŸ‘¤ æ¸¡è¾º é¦™ç¹”  watanabe@example.com Member  [å‰Šé™¤] â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚  â”Œâ”€ æ‹›å¾…ä¸­ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“§ tanaka@example.com   æ‹›å¾…ä¸­   [å†é€] [å–æ¶ˆ]    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚  ãƒ¡ãƒ³ãƒãƒ¼ã‚’æ‹›å¾…ï¼ˆæ®‹ã‚Š2å¸­ï¼‰                               â”‚
â”‚  [ ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ ]  [ æ‹›å¾…ã™ã‚‹ ]                        â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- ãƒ¡ãƒ³ãƒãƒ¼å‰Šé™¤: status ã‚’ 'removed' ã«æ›´æ–°ã€‚å³æ™‚ã‚¢ã‚¯ã‚»ã‚¹åœæ­¢
- æ‹›å¾…å†é€: ãƒ¡ãƒ¼ãƒ«å†é€ä¿¡
- æ‹›å¾…å–æ¶ˆ: ãƒ¬ã‚³ãƒ¼ãƒ‰å‰Šé™¤
- å¸­æ•°ä¸Šé™ãƒã‚§ãƒƒã‚¯: active + pending ã®åˆè¨ˆãŒ max_seats ã‚’è¶…ãˆãªã„ã“ã¨

---

## 6. ãƒ–ãƒ©ãƒ³ãƒ‰ãƒœã‚¤ã‚¹è¨­å®š

```
src/app/team/brand/page.tsx
```

ç®¡ç†è€…ã®ã¿ç·¨é›†å¯èƒ½ã€‚ãƒ¡ãƒ³ãƒãƒ¼ã¯é–²è¦§ã®ã¿ã€‚

```
â”Œâ”€ ğŸ¨ ãƒ–ãƒ©ãƒ³ãƒ‰ãƒœã‚¤ã‚¹è¨­å®š â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                       â”‚
â”‚  â”€â”€ ãƒˆãƒ¼ãƒ³æŒ‡é‡ â”€â”€                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ä¸å¯§ã ãŒå …ã™ããªã„ã€‚ã§ã™ãƒ»ã¾ã™èª¿ã€‚                   â”‚  â”‚
â”‚  â”‚ è¦ªã—ã¿ã‚„ã™ã•ã¨å“æ ¼ã®ãƒãƒ©ãƒ³ã‚¹ã€‚                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â†‘ ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ï¼ˆè‡ªç”±è¨˜è¿°ã€max 500æ–‡å­—ï¼‰                â”‚
â”‚                                                       â”‚
â”‚  â”€â”€ NGãƒ¯ãƒ¼ãƒ‰ â”€â”€                                       â”‚
â”‚  å…±é€šè­¦å‘Šãƒ¯ãƒ¼ãƒ‰ï¼ˆå…¨ãƒ—ãƒ©ãƒ³ï¼‰: æœ€å®‰å€¤, æ¥­ç•ŒNo.1, çµ¶å¯¾,      â”‚
â”‚                              ç¢ºå®Ÿ, ä¿è¨¼                â”‚
â”‚  â”Œ ãƒãƒ¼ãƒ è¿½åŠ NGãƒ¯ãƒ¼ãƒ‰ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ¿€å®‰  [Ã—]                                       â”‚   â”‚
â”‚  â”‚ æ ¼å®‰  [Ã—]                                       â”‚   â”‚
â”‚  â”‚ å½“ç¤¾æ¯” [Ã—]                                      â”‚   â”‚
â”‚  â”‚ [ è¿½åŠ ã™ã‚‹ ]                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â†‘ çµ„ç¹”ãƒ¬ãƒ™ãƒ«NGãƒ¯ãƒ¼ãƒ‰ã€‚ä¸Šé™ãªã—ã€‚å€‹äººã®ã‚«ã‚¹ã‚¿ãƒ 10èªã¨ã¯åˆ¥   â”‚
â”‚                                                       â”‚
â”‚  â”€â”€ è¨˜è¼‰å¿…é ˆãƒã‚§ãƒƒã‚¯ â”€â”€                                 â”‚
â”‚  â˜‘ é…ä¿¡åœæ­¢ãƒªãƒ³ã‚¯                                      â”‚
â”‚  â˜‘ å•ã„åˆã‚ã›å…ˆ                                        â”‚
â”‚  â˜‘ ãƒ–ãƒ©ãƒ³ãƒ‰å                                          â”‚
â”‚  [ + é …ç›®ã‚’è¿½åŠ  ]                                      â”‚
â”‚                                                       â”‚
â”‚  â”€â”€ ä»¶åãƒ«ãƒ¼ãƒ« â”€â”€                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ã€ã€‘å¢¨ä»˜ãã‚«ãƒƒã‚³ä¸ä½¿ç”¨ã€çµµæ–‡å­—1ã¤ã¾ã§               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â†‘ ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ï¼ˆmax 300æ–‡å­—ï¼‰                         â”‚
â”‚                                                       â”‚
â”‚  â”€â”€ æœ€ä½ã‚¹ã‚³ã‚¢ãƒ«ãƒ¼ãƒ« â”€â”€                                 â”‚
â”‚  æœ€ä½ã‚¹ã‚³ã‚¢ãƒ©ã‚¤ãƒ³: [ 65 ]                               â”‚
â”‚  æœªé”æ™‚ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³:                                     â”‚
â”‚  (â—) è­¦å‘Šè¡¨ç¤ºã®ã¿                                      â”‚
â”‚  ( ) è­¦å‘Š + ã€Œè¦ä¿®æ­£ã€ãƒãƒƒã‚¸                             â”‚
â”‚                                                       â”‚
â”‚  [ä¿å­˜]                                                â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã¸ã®åæ˜ 

ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ãŒã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°å®Ÿè¡Œæ™‚ã€Claude APIã®ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ä»¥ä¸‹ã‚’æ³¨å…¥:

```
## ãƒ–ãƒ©ãƒ³ãƒ‰ãƒœã‚¤ã‚¹è¨­å®šï¼ˆç®¡ç†è€…ãŒè¨­å®šæ¸ˆã¿ï¼‰

ã€ãƒˆãƒ¼ãƒ³æŒ‡é‡ã€‘
{brandVoice.tone}

ã€NGãƒ¯ãƒ¼ãƒ‰ã€‘ä»¥ä¸‹ã®å˜èªãŒå«ã¾ã‚Œã‚‹å ´åˆã€é…ä¿¡é©æ­£ã‚¹ã‚³ã‚¢ã‚’æ¸›ç‚¹ã—ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«è¨˜è¼‰:
{å…±é€š5èª + brandVoice.ng_words ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š}

ã€å¿…é ˆãƒã‚§ãƒƒã‚¯ã€‘ä»¥ä¸‹ãŒæ¬ ã‘ã¦ã„ã‚‹å ´åˆã€é…ä¿¡é©æ­£ã‚¹ã‚³ã‚¢ã‚’å¤§å¹…ã«æ¸›ç‚¹:
{brandVoice.required_checks}

ã€ä»¶åãƒ«ãƒ¼ãƒ«ã€‘
{brandVoice.subject_rules}
```

### æœ€ä½ã‚¹ã‚³ã‚¢ãƒ«ãƒ¼ãƒ«åˆ¤å®š

ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°çµæœå–å¾—å¾Œã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§åˆ¤å®š:
- result.totalScore < brand_voice.min_score_threshold ã®å ´åˆ:
  - `warn`: çµæœç”»é¢ã«è­¦å‘ŠãƒãƒŠãƒ¼è¡¨ç¤º
  - `badge`: è­¦å‘ŠãƒãƒŠãƒ¼ + å±¥æ­´ä¸€è¦§ã«ã€Œè¦ä¿®æ­£ã€ãƒãƒƒã‚¸

è­¦å‘ŠãƒãƒŠãƒ¼:
```
âš ï¸ ãƒãƒ¼ãƒ ã®æœ€ä½ã‚¹ã‚³ã‚¢ãƒ©ã‚¤ãƒ³æœªé”
ã‚¹ã‚³ã‚¢ 58/100 ã¯ã€ãƒãƒ¼ãƒ ã®æœ€ä½ãƒ©ã‚¤ãƒ³ 65 ã‚’ä¸‹å›ã£ã¦ã„ã¾ã™ã€‚
æ”¹å–„æ¡ˆã‚’å‚è€ƒã«ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚
```
ãƒ‡ã‚¶ã‚¤ãƒ³: bg-amber-50 border border-amber-200 rounded-xl p-4 text-amber-800

---

## 7. å…±æœ‰ã‚»ã‚°ãƒ¡ãƒ³ãƒˆãƒ—ãƒªã‚»ãƒƒãƒˆ

AudiencePanel ã«ã€Œãƒãƒ¼ãƒ ãƒ—ãƒªã‚»ãƒƒãƒˆã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã€‚

```
â”Œâ”€ ğŸ“Š é…ä¿¡å…ˆã‚»ã‚°ãƒ¡ãƒ³ãƒˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                     â”‚
â”‚  â”€â”€ ãƒ—ãƒªã‚»ãƒƒãƒˆ â”€â”€                                    â”‚
â”‚  [å¥³æ€§èªŒèª­è€…] [20ä»£å¥³æ€§EC] [BtoBãƒªãƒ¼ãƒ‰] ...           â”‚
â”‚                                                     â”‚
â”‚  â”€â”€ ãƒã‚¤ã‚»ã‚°ãƒ¡ãƒ³ãƒˆï¼ˆå€‹äººï¼‰ â”€â”€          â† Proæ©Ÿèƒ½      â”‚
â”‚  [æ—¢å­˜é¡§å®¢å‘ã‘] [VIPä¼šå“¡] ...                        â”‚
â”‚                                                     â”‚
â”‚  â”€â”€ ãƒãƒ¼ãƒ ãƒ—ãƒªã‚»ãƒƒãƒˆ â”€â”€               â† Teamæ©Ÿèƒ½     â”‚
â”‚  [è‡ªç¤¾ECå…¨ä½“] [ãƒ¡ãƒ«ãƒã‚¬èª­è€…] [LINEå‹ã ã¡]             â”‚
â”‚  [ğŸ’¾ ãƒãƒ¼ãƒ ã«ä¿å­˜] â† ä¿å­˜ãƒœã‚¿ãƒ³                      â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- Team: æœ€å¤§20å€‹
- team_presets ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜
- ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼å…¨å“¡ãŒåˆ©ç”¨å¯èƒ½
- ä¿å­˜ã¯ãƒ¡ãƒ³ãƒãƒ¼ã‚‚å¯èƒ½ï¼ˆç®¡ç†è€…ã®ã¿ã«åˆ¶é™ã—ãªã„ï¼‰
- å‰Šé™¤ã¯ç®¡ç†è€… or ä½œæˆè€…

---

## 8. ä¿®æ­£ä¾é ¼æ©Ÿèƒ½

### 8.1 ç®¡ç†è€…ãŒä¿®æ­£ä¾é ¼ã‚’é€ã‚‹

ãƒãƒ¼ãƒ ã®å±¥æ­´ä¸€è¦§ã§ã€ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚¹ã‚³ã‚¢çµæœã‚’è¦‹ã¦ä¿®æ­£ä¾é ¼:

```
[ä¿®æ­£ã‚’ä¾é ¼] ãƒœã‚¿ãƒ³ â†’ ãƒ¢ãƒ¼ãƒ€ãƒ«:
â”Œâ”€ ä¿®æ­£ä¾é ¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                          â”‚
â”‚  å¯¾è±¡: æœ¨æ‘ é¼ / ãƒ¡ãƒ¼ãƒ«ä»¶å / ã‚¹ã‚³ã‚¢ 58    â”‚
â”‚                                          â”‚
â”‚  ã‚³ãƒ¡ãƒ³ãƒˆ:                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ CTAéƒ¨åˆ†ã‚’ã‚‚ã†å°‘ã—å…·ä½“çš„ã«ã—ã¦ãã ã•ã„ã€‚  â”‚ â”‚
â”‚  â”‚ ã€Œè©³ã—ãã¯ã“ã¡ã‚‰ã€ã§ã¯ãªã               â”‚ â”‚
â”‚  â”‚ å…·ä½“çš„ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                          â”‚
â”‚  [é€ä¿¡]  [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]                      â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 ãƒ¡ãƒ³ãƒãƒ¼ãŒä¿®æ­£ä¾é ¼ã‚’å—ã‘ã‚‹

ãƒãƒ¼ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ or ãƒ˜ãƒƒãƒ€ãƒ¼ã«é€šçŸ¥ãƒãƒƒã‚¸:

```
ğŸ”” 1ä»¶ã®ä¿®æ­£ä¾é ¼
```

ä¿®æ­£ä¾é ¼è©³ç´° â†’ å…ƒã®ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°çµæœã‚’è¡¨ç¤º + ã‚³ãƒ¡ãƒ³ãƒˆ â†’ ã€Œå¯¾å¿œã™ã‚‹ã€ãƒœã‚¿ãƒ³ã§å†ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã«é·ç§»ã€‚

å†ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°å®Œäº†æ™‚ã«ã€Œå¯¾å¿œæ¸ˆã¿ã«ã™ã‚‹ã€ãƒœã‚¿ãƒ³ â†’ revision_requests.status ã‚’ 'resolved' ã«æ›´æ–°ã€‚

---

## 9. ãƒãƒ¼ãƒ ã‚¹ã‚³ã‚¢æ¨ç§»ã‚°ãƒ©ãƒ•

```
src/components/team/TeamScoreTrendChart.tsx
```

- rechartsã®æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•
- å„ãƒ¡ãƒ³ãƒãƒ¼ã®ç·š + ãƒãƒ¼ãƒ å¹³å‡ã®å¤ªç·š
- Xè»¸: æ—¥ä»˜ã€Yè»¸: ç·åˆã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰
- æœ€ä½ã‚¹ã‚³ã‚¢ãƒ©ã‚¤ãƒ³ã‚’èµ¤ã®æ°´å¹³ç ´ç·šã§è¡¨ç¤º
- æœŸé–“é¸æŠ: ç›´è¿‘7æ—¥ / 30æ—¥ / 90æ—¥
- ãƒ¡ãƒ³ãƒãƒ¼ãƒ•ã‚£ãƒ«ã‚¿: ç‰¹å®šãƒ¡ãƒ³ãƒãƒ¼ã®ã¿è¡¨ç¤ºåˆ‡æ›¿
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ

---

## 10. ãƒ¡ãƒ³ãƒãƒ¼åˆ¥çµ±è¨ˆ

ç®¡ç†è€…å‘ã‘ã€‚ãƒãƒ¼ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ã€Œãƒ¡ãƒ³ãƒãƒ¼ã€ã‚¿ãƒ–ã€‚

å„ãƒ¡ãƒ³ãƒãƒ¼ã®çµ±è¨ˆ:
- ä»Šæœˆã®ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°å›æ•°
- å¹³å‡ã‚¹ã‚³ã‚¢ï¼ˆå…ˆæœˆæ¯” +/- è¡¨ç¤ºï¼‰
- æœ€é »åˆ©ç”¨ãƒãƒ£ãƒãƒ«
- æœ€ä½ã‚¹ã‚³ã‚¢ãƒ©ã‚¤ãƒ³æœªé”ç‡
- 5è»¸ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆï¼ˆãƒ¡ãƒ³ãƒãƒ¼å€‹äºº vs ãƒãƒ¼ãƒ å¹³å‡ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼‰

---

## 11. å€‹äºº vs ãƒãƒ¼ãƒ å¹³å‡æ¯”è¼ƒ

ãƒ¡ãƒ³ãƒãƒ¼è‡ªèº«ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«è¡¨ç¤ºã€‚

```
src/components/team/PersonalVsTeamRadar.tsx
```

- rechartsã®RadarChart
- è‡ªåˆ†ã®5è»¸å¹³å‡ï¼ˆindigoï¼‰ã¨ ãƒãƒ¼ãƒ å¹³å‡5è»¸ï¼ˆstone-400ã€ç ´ç·šï¼‰ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤
- ä¸‹ã«å„è»¸ã®å·®åˆ†ãƒ†ãƒ¼ãƒ–ãƒ«:
  ```
  é–‹å°èª˜å¼•åŠ›:     è‡ªåˆ† 74  ãƒãƒ¼ãƒ  78  å·® -4
  èª­äº†æ€§:         è‡ªåˆ† 68  ãƒãƒ¼ãƒ  70  å·® -2
  CTAå¼·åº¦:       è‡ªåˆ† 60  ãƒãƒ¼ãƒ  72  å·® -12 â† æ”¹å–„ãƒã‚¤ãƒ³ãƒˆ
  ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé©åˆåº¦: è‡ªåˆ† 75  ãƒãƒ¼ãƒ  73  å·® +2
  é…ä¿¡é©æ­£:       è‡ªåˆ† 80  ãƒãƒ¼ãƒ  79  å·® +1
  ```
- æœ€ã‚‚å·®ãŒå¤§ãã„è»¸ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆï¼ˆã€ŒğŸ’¡ CTAå¼·åº¦ãŒãƒãƒ¼ãƒ å¹³å‡ã‚ˆã‚Š-12ptã€‚æ”¹å–„ææ¡ˆã‚’å‚è€ƒã«ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€ï¼‰

---

## 12. è«‹æ±‚æ›¸PDF

Stripe Invoiceã®è‡ªå‹•ç™ºè¡Œã‚’åˆ©ç”¨ã€‚Teamä»¥ä¸Šã®èª²é‡‘ã§è‡ªå‹•çš„ã«Stripeå´ã§è«‹æ±‚æ›¸ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚

ãƒãƒ¼ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ã€Œè¨­å®šã€ã‚¿ãƒ–ã«:
- ã€Œè«‹æ±‚å±¥æ­´ã‚’è¦‹ã‚‹ã€â†’ Stripe Customer Portal ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
- Stripe Portal ã§è«‹æ±‚æ›¸PDF ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒå¯èƒ½

è¿½åŠ å®Ÿè£…ã¯æœ€å°é™:
- ãƒãƒ¼ãƒ è¨­å®šãƒšãƒ¼ã‚¸ã«ãƒªãƒ³ã‚¯ã‚’é…ç½®ã™ã‚‹ã®ã¿
- Stripe Invoice ã® invoice.paid ã‚¤ãƒ™ãƒ³ãƒˆã¯ Webhook ã§å—ã‘ã¦ãƒ­ã‚°è¨˜éŒ²ï¼ˆä»»æ„ï¼‰

---

## 13. æ–™é‡‘ãƒšãƒ¼ã‚¸æ›´æ–°

Phase 2ã®æ–™é‡‘ãƒšãƒ¼ã‚¸ã‚’æ‹¡å¼µã—ã¦ã€Team S/M/L ã‚’è¿½åŠ ã€‚

```
â”Œâ”€ æ–™é‡‘ãƒ—ãƒ©ãƒ³ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                       â”‚
â”‚  [Free]      [Pro]      [Team S]  [Team M]  [Team L]  â”‚
â”‚   Â¥0         Â¥980/æœˆ    Â¥4,980/æœˆ Â¥8,980/æœˆ Â¥19,800/æœˆâ”‚
â”‚                         5åã¾ã§   10åã¾ã§   30åã¾ã§   â”‚
â”‚                                                       â”‚
â”‚  ... æ©Ÿèƒ½æ¯”è¼ƒãƒ†ãƒ¼ãƒ–ãƒ« ...                                â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

æ©Ÿèƒ½æ¯”è¼ƒãƒ†ãƒ¼ãƒ–ãƒ«ã®é …ç›®:
- ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°å›æ•°
- å±¥æ­´ä¿æŒæœŸé–“
- ã‚«ã‚¹ã‚¿ãƒ ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ
- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ / CSV / æ¨ç§»ã‚°ãƒ©ãƒ• / å®Ÿç¸¾å…¥åŠ›
- ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹
- ãƒ¡ãƒ³ãƒãƒ¼æ‹›å¾…ãƒ»ç®¡ç†
- å…±æœ‰ãƒ—ãƒªã‚»ãƒƒãƒˆï¼ˆ20å€‹ï¼‰
- ãƒ–ãƒ©ãƒ³ãƒ‰ãƒœã‚¤ã‚¹è¨­å®š
- æœ€ä½ã‚¹ã‚³ã‚¢ãƒ«ãƒ¼ãƒ«
- ãƒ¡ãƒ³ãƒãƒ¼åˆ¥çµ±è¨ˆ
- ä¿®æ­£ä¾é ¼
- è«‹æ±‚æ›¸PDF

---

## 14. ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ›´æ–°

### ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆTeamæ‰€å±æ™‚ï¼‰

```
â—† MsgScore    ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°  å±¥æ­´  ãƒãƒ¼ãƒ   æ–™é‡‘    [Team S] [ã‚¢ãƒã‚¿ãƒ¼ â–¼]
                                                          â”œ è¨­å®š
                                                          â”œ ãƒãƒ¼ãƒ ç®¡ç†
                                                          â”œ ãƒ—ãƒ©ãƒ³ç®¡ç†
                                                          â”” ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
```

[Team S] ãƒãƒƒã‚¸: bg-emerald-100 text-emerald-700 text-xs px-2 py-0.5 rounded-full font-medium

---

## 15. æ–°è¦ãƒšãƒ¼ã‚¸ãƒ»ãƒ«ãƒ¼ãƒˆä¸€è¦§

```
src/app/
  team/
    page.tsx                    â€” ãƒãƒ¼ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
    setup/page.tsx              â€” ãƒãƒ¼ãƒ åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
    members/page.tsx            â€” ãƒ¡ãƒ³ãƒãƒ¼ç®¡ç†ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰
    brand/page.tsx              â€” ãƒ–ãƒ©ãƒ³ãƒ‰ãƒœã‚¤ã‚¹è¨­å®š
    settings/page.tsx           â€” ãƒãƒ¼ãƒ è¨­å®šï¼ˆãƒ—ãƒ©ãƒ³ãƒ»è«‹æ±‚æ›¸ï¼‰
    invite/[token]/page.tsx     â€” æ‹›å¾…æ‰¿è«¾ãƒšãƒ¼ã‚¸
  api/
    team/
      route.ts                  â€” ãƒãƒ¼ãƒ æƒ…å ±å–å¾—ãƒ»æ›´æ–°
      create/route.ts           â€” ãƒãƒ¼ãƒ ä½œæˆ
      members/route.ts          â€” ãƒ¡ãƒ³ãƒãƒ¼ä¸€è¦§ãƒ»æ‹›å¾…ãƒ»å‰Šé™¤
      members/invite/route.ts   â€” æ‹›å¾…ãƒ¡ãƒ¼ãƒ«é€ä¿¡
      presets/route.ts          â€” å…±æœ‰ãƒ—ãƒªã‚»ãƒƒãƒˆCRUD
      brand-voice/route.ts      â€” ãƒ–ãƒ©ãƒ³ãƒ‰ãƒœã‚¤ã‚¹å–å¾—ãƒ»æ›´æ–°
      stats/route.ts            â€” ãƒãƒ¼ãƒ çµ±è¨ˆãƒ‡ãƒ¼ã‚¿
      revision/route.ts         â€” ä¿®æ­£ä¾é ¼CRUD
    stripe/
      checkout/route.ts         â€” æ›´æ–°: Team ãƒ—ãƒ©ãƒ³å¯¾å¿œè¿½åŠ 
      webhook/route.ts          â€” æ›´æ–°: Team ä½œæˆå‡¦ç†è¿½åŠ 
```

---

## 16. ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°APIæ›´æ–°

`/api/score` ã®æ›´æ–°å†…å®¹:

1. ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒãƒ¼ãƒ ã«æ‰€å±ã—ã¦ã„ã‚‹å ´åˆ:
   - score_history.team_id ã‚’è‡ªå‹•ã‚»ãƒƒãƒˆ
   - brand_voice ã‚’å–å¾—ã—ã¦ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«æ³¨å…¥
   - ãƒãƒ¼ãƒ ã®NGãƒ¯ãƒ¼ãƒ‰ã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«è¿½åŠ 
2. ãƒ¬ãƒ¼ãƒˆåˆ¶é™:
   - Teamãƒ¡ãƒ³ãƒãƒ¼ã¯å…¨å“¡ç„¡åˆ¶é™ï¼ˆProç›¸å½“ï¼‰
3. æœ€ä½ã‚¹ã‚³ã‚¢ãƒ«ãƒ¼ãƒ«:
   - ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã« min_score_threshold ã¨åˆ¤å®šçµæœã‚’å«ã‚ã‚‹

---

## 17. æŠ€è¡“çš„ãªæ³¨æ„äº‹é …

- ãƒãƒ¼ãƒ æ‰€å±ã®åˆ¤å®šã¯å¿…ãš team_members ãƒ†ãƒ¼ãƒ–ãƒ«ã§è¡Œã†ï¼ˆprofiles.plan ã§ã¯ãªã„ï¼‰
- ç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯: team_members.role === 'owner' ã‚’API Routeå´ã§æ¤œè¨¼
- æ‹›å¾…ãƒ¡ãƒ¼ãƒ«: Supabase ã®ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ãƒ¡ãƒ¼ãƒ« or Resendã€‚Phase 2ã®ãƒã‚¸ãƒƒã‚¯ãƒªãƒ³ã‚¯å•é¡ŒãŒè§£æ±ºã™ã‚‹ã¾ã§ã¯ã€æ‹›å¾…ãƒªãƒ³ã‚¯ã‚’UIä¸Šã«è¡¨ç¤ºã—ã¦ã‚³ãƒ”ãƒ¼ã™ã‚‹æ–¹å¼ã‚‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¨ã—ã¦ç”¨æ„
- RLSãƒãƒªã‚·ãƒ¼ã¯å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¿…ãšé©ç”¨ã€‚ãƒ†ã‚¹ãƒˆæ™‚ã«service_roleã§ç›´æ¥ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç¢ºèª
- brand_voice ã®æ›´æ–°ã¯Ownerã®ã¿ã€‚API Routeå´ã§ãƒ­ãƒ¼ãƒ«ãƒã‚§ãƒƒã‚¯
- ãƒãƒ¼ãƒ é–¢é€£ãƒšãƒ¼ã‚¸ã¯å…¨ã¦èªè¨¼å¿…é ˆ + ãƒãƒ¼ãƒ æ‰€å±ãƒã‚§ãƒƒã‚¯ã® middleware
- ãƒ‡ã‚¶ã‚¤ãƒ³ã¯ Phase 1/2 ã® Editorial Dashboard ãƒ†ã‚¤ã‚¹ãƒˆã‚’ç¶­æŒ

---

## 18. æœ€çµ‚ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] Team S ã® Stripe Checkout ã§èª²é‡‘ãŒå®Œäº†ã™ã‚‹
- [ ] èª²é‡‘å®Œäº†å¾Œã«ãƒãƒ¼ãƒ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒãƒ¼ãƒ åå…¥åŠ› + ãƒ¡ãƒ³ãƒãƒ¼æ‹›å¾…ãŒå‹•ä½œã™ã‚‹
- [ ] æ‹›å¾…ãƒªãƒ³ã‚¯ã‹ã‚‰ãƒãƒ¼ãƒ ã«å‚åŠ ã§ãã‚‹
- [ ] ãƒãƒ¼ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰: ç®¡ç†è€…ãƒ“ãƒ¥ãƒ¼ã¨ãƒ¡ãƒ³ãƒãƒ¼ãƒ“ãƒ¥ãƒ¼ã®åˆ‡æ›¿
- [ ] ãƒ¡ãƒ³ãƒãƒ¼ç®¡ç†: æ‹›å¾…ãƒ»å‰Šé™¤ãƒ»å†é€ãƒ»å–æ¶ˆ
- [ ] å¸­æ•°ä¸Šé™ãƒã‚§ãƒƒã‚¯
- [ ] ãƒ–ãƒ©ãƒ³ãƒ‰ãƒœã‚¤ã‚¹è¨­å®š: å…¨é …ç›®ã®ä¿å­˜ãƒ»èª­ã¿è¾¼ã¿
- [ ] ãƒ–ãƒ©ãƒ³ãƒ‰ãƒœã‚¤ã‚¹ãŒã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«æ³¨å…¥ã•ã‚Œã‚‹
- [ ] NGãƒ¯ãƒ¼ãƒ‰ï¼ˆçµ„ç¹”ï¼‰: ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°çµæœã«åæ˜ 
- [ ] æœ€ä½ã‚¹ã‚³ã‚¢ãƒ«ãƒ¼ãƒ«: æœªé”æ™‚ã«è­¦å‘Šè¡¨ç¤º
- [ ] å…±æœ‰ãƒ—ãƒªã‚»ãƒƒãƒˆ: ä¿å­˜ãƒ»åˆ©ç”¨ãƒ»å‰Šé™¤ï¼ˆ20å€‹ä¸Šé™ï¼‰
- [ ] ãƒãƒ¼ãƒ ã‚¹ã‚³ã‚¢æ¨ç§»ã‚°ãƒ©ãƒ•: ãƒ¡ãƒ³ãƒãƒ¼åˆ¥ + ãƒãƒ¼ãƒ å¹³å‡
- [ ] ãƒ¡ãƒ³ãƒãƒ¼åˆ¥çµ±è¨ˆ: å›æ•°ãƒ»å¹³å‡ã‚¹ã‚³ã‚¢ãƒ»5è»¸ãƒ¬ãƒ¼ãƒ€ãƒ¼
- [ ] å€‹äºº vs ãƒãƒ¼ãƒ å¹³å‡æ¯”è¼ƒ: ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤
- [ ] ä¿®æ­£ä¾é ¼: é€ä¿¡ãƒ»å—ä¿¡ãƒ»å¯¾å¿œæ¸ˆã¿ãƒãƒ¼ã‚¯
- [ ] æ–™é‡‘ãƒšãƒ¼ã‚¸: Free / Pro / Team S/M/L ã®è¡¨ç¤ºã¨èª²é‡‘å°ç·š
- [ ] ãƒ˜ãƒƒãƒ€ãƒ¼: Teamæ‰€å±æ™‚ã®ãƒãƒƒã‚¸ãƒ»ãƒŠãƒ“è¡¨ç¤º
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–: å…¨æ–°è¦ãƒšãƒ¼ã‚¸ã§ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ
- [ ] RLS: ä»–ãƒãƒ¼ãƒ ã®ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ã“ã¨
